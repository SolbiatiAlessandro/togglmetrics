extends layout

block content
	h1 Detailed Report
	button(onclick='openDebug()') show debug informations
	p number of rows in the report is #{length} 
	p unique projects are #{unique_projects}
	canvas(style="width:60%;height:600px", id="canvas")
	div(id="debug" style="display:none;" )
		button(onclick='closeDebug()') hide debug informations
		p #{debug}
		p unique dates are #{unique_dates}

	script.
		var openDebug = function() {
			document.getElementById('debug').style.display = 'block';
		}
		var closeDebug = function() {
			document.getElementById('debug').style.display = 'none';
		}

	script.
		window.randomScalingFactor = function() {
			return 20
		};
		var barChartData = !{JSON.stringify(duration_bar_chart)};
		window.onload = function() {
			var ctx = document.getElementById('canvas').getContext('2d');
			window.myBar = new Chart(ctx, {
				type: 'bar',
				data: barChartData,
				options: {
					title: {
						display: true,
						text: 'Chart.js Bar Chart - Stacked'
					},
					tooltips: {
						mode: 'index',
						intersect: false
					},
					responsive: true,
					scales: {
						xAxes: [{
							stacked: true,
						}],
						yAxes: [{
							stacked: true
						}]
					}
				}
			});
		};
